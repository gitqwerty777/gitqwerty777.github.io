{
    "version": "https://jsonfeed.org/version/1",
    "title": "QWERTY â€¢ All posts by \"fisher-yates\" tag",
    "description": "Programming | Computer Science | Thought",
    "home_page_url": "http://gitqwerty777.github.io",
    "items": [
        {
            "id": "http://gitqwerty777.github.io/why-linear-shuffle-works/",
            "url": "http://gitqwerty777.github.io/why-linear-shuffle-works/",
            "title": "éš¨æ©Ÿæ’åºæ¼”ç®—æ³•å¯¦ä½œ",
            "date_published": "2022-01-15T10:12:50.000Z",
            "content_html": "<h2 id=\"ç°¡ä»‹\"><a href=\"#ç°¡ä»‹\" class=\"headerlink\" title=\"ç°¡ä»‹\"></a>ç°¡ä»‹</h2><p>èªªåˆ°éš¨æ©Ÿæ’åº(shuffle)æ¼”ç®—æ³•ï¼Œæœ€è‘—åçš„è‚¯å®šæ˜¯Fisherâ€“Yatesï¼Œå®ƒæ˜¯ä¸€å€‹$O(N)$æ™‚é–“çš„æ¼”ç®—æ³•ï¼Œå½ç¢¼å¦‚ä¸‹</p>\n<a id=\"more\"></a>\n<figure class=\"highlight reasonml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"constructor\">Shuffle(Array <span class=\"params\">a</span>)</span>&#123;</span><br><span class=\"line\">    N = a.length</span><br><span class=\"line\">    for (i = <span class=\"number\">0</span> ~ N-<span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">        <span class=\"constructor\">Swap(<span class=\"params\">a</span>[<span class=\"params\">i</span>], <span class=\"params\">a</span>[Random <span class=\"params\">value</span> <span class=\"params\">between</span> <span class=\"params\">i</span> <span class=\"params\">and</span> N])</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç°¡å–®ä¾†èªªå°±æ˜¯æ¯å€‹å…ƒç´ éƒ½å’Œä¹‹å¾Œ(åŒ…å«è‡ªèº«)çš„éš¨æ©Ÿä¸€å€‹å…ƒç´ äº¤æ›</p>\n<h2 id=\"å¯¦ä½œ\"><a href=\"#å¯¦ä½œ\" class=\"headerlink\" title=\"å¯¦ä½œ\"></a>å¯¦ä½œ</h2><figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> random</span><br><span class=\"line\"></span><br><span class=\"line\">N = <span class=\"number\">10</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">Shuffle</span><span class=\"params\">(arr)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(N<span class=\"number\">-1</span>):</span><br><span class=\"line\">        j = random.randint(i, N<span class=\"number\">-1</span>)</span><br><span class=\"line\">        arr[i], arr[j] = arr[j], arr[i]</span><br><span class=\"line\"></span><br><span class=\"line\">total = [[<span class=\"number\">0</span> <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(N)] <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> range(N)]</span><br><span class=\"line\"><span class=\"keyword\">for</span> t <span class=\"keyword\">in</span> range(<span class=\"number\">1000000</span>):</span><br><span class=\"line\">    arr = [i <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(N)]</span><br><span class=\"line\">    Shuffle(arr)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i, v <span class=\"keyword\">in</span> enumerate(arr):</span><br><span class=\"line\">        total[v][i] += <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(N):</span><br><span class=\"line\">    print(<span class=\"string\">f\"æ•¸å­—<span class=\"subst\">&#123;i&#125;</span>åˆ†ä½ˆ\"</span>)</span><br><span class=\"line\">    print(<span class=\"string\">\",\"</span>.join(str(v) <span class=\"keyword\">for</span> v <span class=\"keyword\">in</span> total[i]))</span><br></pre></td></tr></table></figure>\n\n<p>åŸ·è¡Œ1000000æ¬¡Shuffleï¼Œå„æ•¸å­—çš„åˆ†å¸ƒ</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"code\"><pre><span class=\"line\">æ•¸å­—<span class=\"number\">0</span>åˆ†ä½ˆ</span><br><span class=\"line\"><span class=\"number\">99656</span>,<span class=\"number\">99624</span>,<span class=\"number\">100636</span>,<span class=\"number\">100081</span>,<span class=\"number\">99957</span>,<span class=\"number\">100149</span>,<span class=\"number\">100238</span>,<span class=\"number\">100287</span>,<span class=\"number\">99710</span>,<span class=\"number\">99662</span></span><br><span class=\"line\">æ•¸å­—<span class=\"number\">1</span>åˆ†ä½ˆ</span><br><span class=\"line\"><span class=\"number\">100043</span>,<span class=\"number\">100292</span>,<span class=\"number\">99499</span>,<span class=\"number\">100262</span>,<span class=\"number\">100141</span>,<span class=\"number\">99847</span>,<span class=\"number\">100098</span>,<span class=\"number\">100164</span>,<span class=\"number\">99655</span>,<span class=\"number\">99999</span></span><br><span class=\"line\">æ•¸å­—<span class=\"number\">2</span>åˆ†ä½ˆ</span><br><span class=\"line\"><span class=\"number\">100032</span>,<span class=\"number\">100412</span>,<span class=\"number\">99857</span>,<span class=\"number\">100035</span>,<span class=\"number\">100148</span>,<span class=\"number\">99738</span>,<span class=\"number\">100139</span>,<span class=\"number\">99765</span>,<span class=\"number\">99681</span>,<span class=\"number\">100193</span></span><br><span class=\"line\">æ•¸å­—<span class=\"number\">3</span>åˆ†ä½ˆ</span><br><span class=\"line\"><span class=\"number\">100031</span>,<span class=\"number\">99868</span>,<span class=\"number\">100572</span>,<span class=\"number\">99418</span>,<span class=\"number\">99965</span>,<span class=\"number\">99918</span>,<span class=\"number\">99889</span>,<span class=\"number\">100107</span>,<span class=\"number\">100279</span>,<span class=\"number\">99953</span></span><br><span class=\"line\">æ•¸å­—<span class=\"number\">4</span>åˆ†ä½ˆ</span><br><span class=\"line\"><span class=\"number\">100214</span>,<span class=\"number\">99716</span>,<span class=\"number\">100181</span>,<span class=\"number\">100315</span>,<span class=\"number\">99764</span>,<span class=\"number\">99667</span>,<span class=\"number\">100270</span>,<span class=\"number\">99829</span>,<span class=\"number\">99871</span>,<span class=\"number\">100173</span></span><br><span class=\"line\">æ•¸å­—<span class=\"number\">5</span>åˆ†ä½ˆ</span><br><span class=\"line\"><span class=\"number\">99952</span>,<span class=\"number\">100282</span>,<span class=\"number\">99670</span>,<span class=\"number\">99642</span>,<span class=\"number\">99919</span>,<span class=\"number\">100401</span>,<span class=\"number\">99785</span>,<span class=\"number\">100627</span>,<span class=\"number\">100215</span>,<span class=\"number\">99507</span></span><br><span class=\"line\">æ•¸å­—<span class=\"number\">6</span>åˆ†ä½ˆ</span><br><span class=\"line\"><span class=\"number\">100332</span>,<span class=\"number\">99879</span>,<span class=\"number\">99976</span>,<span class=\"number\">100143</span>,<span class=\"number\">99614</span>,<span class=\"number\">100319</span>,<span class=\"number\">99665</span>,<span class=\"number\">100169</span>,<span class=\"number\">100380</span>,<span class=\"number\">99523</span></span><br><span class=\"line\">æ•¸å­—<span class=\"number\">7</span>åˆ†ä½ˆ</span><br><span class=\"line\"><span class=\"number\">99878</span>,<span class=\"number\">100407</span>,<span class=\"number\">99804</span>,<span class=\"number\">99669</span>,<span class=\"number\">100115</span>,<span class=\"number\">99760</span>,<span class=\"number\">100251</span>,<span class=\"number\">99602</span>,<span class=\"number\">100124</span>,<span class=\"number\">100390</span></span><br><span class=\"line\">æ•¸å­—<span class=\"number\">8</span>åˆ†ä½ˆ</span><br><span class=\"line\"><span class=\"number\">100104</span>,<span class=\"number\">99888</span>,<span class=\"number\">99876</span>,<span class=\"number\">100575</span>,<span class=\"number\">100181</span>,<span class=\"number\">100229</span>,<span class=\"number\">100083</span>,<span class=\"number\">99398</span>,<span class=\"number\">99632</span>,<span class=\"number\">100034</span></span><br><span class=\"line\">æ•¸å­—<span class=\"number\">9</span>åˆ†ä½ˆ</span><br><span class=\"line\"><span class=\"number\">99758</span>,<span class=\"number\">99632</span>,<span class=\"number\">99929</span>,<span class=\"number\">99860</span>,<span class=\"number\">100196</span>,<span class=\"number\">99972</span>,<span class=\"number\">99582</span>,<span class=\"number\">100052</span>,<span class=\"number\">100453</span>,<span class=\"number\">100566</span></span><br></pre></td></tr></table></figure>\n\n<p>ä½†ç‚ºä½•åªè¦é€™æ¨£äº¤æ›ï¼Œå°±æ˜¯éš¨æ©Ÿæ’åºï¼Ÿ ğŸ¤”</p>\n<h2 id=\"ä¸åš´è¬¹çš„è­‰æ˜\"><a href=\"#ä¸åš´è¬¹çš„è­‰æ˜\" class=\"headerlink\" title=\"ä¸åš´è¬¹çš„è­‰æ˜\"></a>ä¸åš´è¬¹çš„è­‰æ˜</h2><p>å·²çŸ¥N=1æˆ–2æ™‚ï¼Œä½¿ç”¨æ­¤æ³•çš†å¯ä½¿é™£åˆ—ç‚ºéš¨æ©Ÿæ’åºã€‚<br>è‹¥N=næ™‚æˆç«‹ï¼Œè€ƒæ…®N=n+1æ™‚çš„æƒ…æ³ï¼š<br>Without loss of generalityï¼Œä»¤é™£åˆ—ç‚º[0, 1, 2, â€¦, n]<br>ç¬¬ä¸€å€‹ä½ç½®çš„æ•¸0æœƒå’Œå¾Œé¢çš„éš¨æ©Ÿä¸€å€‹å…ƒç´ äº¤æ›ï¼Œæ­¤æ™‚ç¬¬ä¸€å€‹ä½ç½®æ˜¯0åˆ°nçš„æ•¸çš„æ©Ÿç‡æ˜¯å¹³å‡çš„ $P_0(v)=\\frac{1}{n+1}, v \\in {0, 1, 2, .. n}$<br>æ­¤æ™‚å­é™£åˆ—(<code>[1:]</code>)å³ç‚ºN=nçš„æƒ…æ³ï¼Œä¾ç…§å‡è¨­ï¼Œä½¿ç”¨æ­¤æ³•å¾Œï¼Œå…¶é¤˜æ•¸å­—æœƒæ˜¯éš¨æ©Ÿæ’åºï¼Œ<br>æ‰€ä»¥N=n+1æ™‚ä¹Ÿæˆç«‹ã€‚<br>ä¾æ•¸å­¸æ­¸ç´æ³•ï¼ŒN=1,2æ™‚æˆç«‹ï¼Œä¸”N=næˆç«‹æ™‚ï¼ŒN=n+1ä¹Ÿæˆç«‹ï¼›æ‰€ä»¥Nç‚ºè‡ªç„¶æ•¸æ™‚ï¼Œä½¿ç”¨æ­¤æ³•çš†å¯ä½¿é™£åˆ—ç‚ºéš¨æ©Ÿæ’åºã€‚$\\blacksquare$</p>\n<hr>\n<p>ä¸€å€‹æ›´ç›´è§€çš„è§£é‡‹æ˜¯ï¼Œæ¯ä¸€æ¬¡äº¤æ›éƒ½æ˜¯åœ¨éš¨æ©Ÿé¸æ“‡å‰©ä¸‹é‚„æ²’é¸çš„å€¼ã€‚</p>\n<h2 id=\"éŒ¯èª¤ç‰ˆæœ¬\"><a href=\"#éŒ¯èª¤ç‰ˆæœ¬\" class=\"headerlink\" title=\"éŒ¯èª¤ç‰ˆæœ¬\"></a>éŒ¯èª¤ç‰ˆæœ¬</h2><figure class=\"highlight reasonml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"constructor\">WrongShuffle(Array <span class=\"params\">a</span>)</span>&#123;</span><br><span class=\"line\">    N = a.length</span><br><span class=\"line\">    for (i = <span class=\"number\">0</span> ~ N-<span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">        <span class=\"constructor\">Swap(<span class=\"params\">a</span>[<span class=\"params\">i</span>], <span class=\"params\">a</span>[Random <span class=\"params\">value</span> <span class=\"params\">between</span> 0 <span class=\"params\">and</span> N])</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ­¤ç‰ˆæœ¬çš„æ‰€æœ‰å…ƒç´ å°é™£åˆ—ä¸­çš„ä¸€å€‹å…ƒç´ äº¤æ›<br>é›–ç„¶æ¥è¿‘ï¼Œä½†ä¸æ˜¯éš¨æ©Ÿæ’åº</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"code\"><pre><span class=\"line\">æ•¸å­—<span class=\"number\">0</span>åˆ†ä½ˆ</span><br><span class=\"line\"><span class=\"number\">99993</span>,<span class=\"number\">100886</span>,<span class=\"number\">99773</span>,<span class=\"number\">100749</span>,<span class=\"number\">100077</span>,<span class=\"number\">99675</span>,<span class=\"number\">99556</span>,<span class=\"number\">99589</span>,<span class=\"number\">99798</span>,<span class=\"number\">99904</span></span><br><span class=\"line\">æ•¸å­—<span class=\"number\">1</span>åˆ†ä½ˆ</span><br><span class=\"line\"><span class=\"number\">128185</span>,<span class=\"number\">93869</span>,<span class=\"number\">94816</span>,<span class=\"number\">95112</span>,<span class=\"number\">96020</span>,<span class=\"number\">96324</span>,<span class=\"number\">97355</span>,<span class=\"number\">98316</span>,<span class=\"number\">99545</span>,<span class=\"number\">100458</span></span><br><span class=\"line\">æ•¸å­—<span class=\"number\">2</span>åˆ†ä½ˆ</span><br><span class=\"line\"><span class=\"number\">120180</span>,<span class=\"number\">124118</span>,<span class=\"number\">89932</span>,<span class=\"number\">91055</span>,<span class=\"number\">91953</span>,<span class=\"number\">92791</span>,<span class=\"number\">94813</span>,<span class=\"number\">96518</span>,<span class=\"number\">98183</span>,<span class=\"number\">100457</span></span><br><span class=\"line\">æ•¸å­—<span class=\"number\">3</span>åˆ†ä½ˆ</span><br><span class=\"line\"><span class=\"number\">112478</span>,<span class=\"number\">115941</span>,<span class=\"number\">120497</span>,<span class=\"number\">86991</span>,<span class=\"number\">88766</span>,<span class=\"number\">90575</span>,<span class=\"number\">92353</span>,<span class=\"number\">94732</span>,<span class=\"number\">97465</span>,<span class=\"number\">100202</span></span><br><span class=\"line\">æ•¸å­—<span class=\"number\">4</span>åˆ†ä½ˆ</span><br><span class=\"line\"><span class=\"number\">104476</span>,<span class=\"number\">109125</span>,<span class=\"number\">113448</span>,<span class=\"number\">119119</span>,<span class=\"number\">85554</span>,<span class=\"number\">88077</span>,<span class=\"number\">90897</span>,<span class=\"number\">92827</span>,<span class=\"number\">96727</span>,<span class=\"number\">99750</span></span><br><span class=\"line\">æ•¸å­—<span class=\"number\">5</span>åˆ†ä½ˆ</span><br><span class=\"line\"><span class=\"number\">97764</span>,<span class=\"number\">101507</span>,<span class=\"number\">106920</span>,<span class=\"number\">112440</span>,<span class=\"number\">118047</span>,<span class=\"number\">85835</span>,<span class=\"number\">89281</span>,<span class=\"number\">92036</span>,<span class=\"number\">96476</span>,<span class=\"number\">99694</span></span><br><span class=\"line\">æ•¸å­—<span class=\"number\">6</span>åˆ†ä½ˆ</span><br><span class=\"line\"><span class=\"number\">91910</span>,<span class=\"number\">96017</span>,<span class=\"number\">101046</span>,<span class=\"number\">105743</span>,<span class=\"number\">112624</span>,<span class=\"number\">119489</span>,<span class=\"number\">87594</span>,<span class=\"number\">91230</span>,<span class=\"number\">94797</span>,<span class=\"number\">99550</span></span><br><span class=\"line\">æ•¸å­—<span class=\"number\">7</span>åˆ†ä½ˆ</span><br><span class=\"line\"><span class=\"number\">86177</span>,<span class=\"number\">90650</span>,<span class=\"number\">96260</span>,<span class=\"number\">101089</span>,<span class=\"number\">107061</span>,<span class=\"number\">113865</span>,<span class=\"number\">120411</span>,<span class=\"number\">90146</span>,<span class=\"number\">94617</span>,<span class=\"number\">99724</span></span><br><span class=\"line\">æ•¸å­—<span class=\"number\">8</span>åˆ†ä½ˆ</span><br><span class=\"line\"><span class=\"number\">81888</span>,<span class=\"number\">86070</span>,<span class=\"number\">90840</span>,<span class=\"number\">96392</span>,<span class=\"number\">101840</span>,<span class=\"number\">109008</span>,<span class=\"number\">115726</span>,<span class=\"number\">124044</span>,<span class=\"number\">93945</span>,<span class=\"number\">100247</span></span><br><span class=\"line\">æ•¸å­—<span class=\"number\">9</span>åˆ†ä½ˆ</span><br><span class=\"line\"><span class=\"number\">76949</span>,<span class=\"number\">81817</span>,<span class=\"number\">86468</span>,<span class=\"number\">91310</span>,<span class=\"number\">98058</span>,<span class=\"number\">104361</span>,<span class=\"number\">112014</span>,<span class=\"number\">120562</span>,<span class=\"number\">128447</span>,<span class=\"number\">100014</span></span><br></pre></td></tr></table></figure>\n\n<p>ç‚ºä½•ä¸æ˜¯éš¨æ©Ÿæ’åºï¼Ÿ ğŸ¤” ç›®å‰æƒ³ä¸åˆ°ç›´è§€è§£é‡‹</p>\n<p>åƒè€ƒç¶­åŸºçš„è­‰æ˜ï¼š<br>ç¸½å…±æœ‰$n^n$ç¨®é¸æ³•ï¼Œä½†å¯èƒ½çš„æ’åˆ—åªæœ‰$n!$ç¨®ï¼Œåœ¨$n&gt;2$æ™‚ä¸¦ä¸èƒ½æ•´é™¤</p>\n<h2 id=\"æ›´ç°¡å–®çš„å¯¦ä½œ\"><a href=\"#æ›´ç°¡å–®çš„å¯¦ä½œ\" class=\"headerlink\" title=\"æ›´ç°¡å–®çš„å¯¦ä½œ\"></a>æ›´ç°¡å–®çš„å¯¦ä½œ</h2><p>å°æ¯å€‹indexè¨­ä¸€éš¨æ©Ÿæ•¸ï¼Œå°éš¨æ©Ÿæ•¸æ’åº<br>æ™‚é–“è¤‡é›œåº¦ç‚º$O(n\\log n)$</p>\n<h2 id=\"å„èªè¨€Shuffleå¯¦ä½œ\"><a href=\"#å„èªè¨€Shuffleå¯¦ä½œ\" class=\"headerlink\" title=\"å„èªè¨€Shuffleå¯¦ä½œ\"></a>å„èªè¨€Shuffleå¯¦ä½œ</h2><p>éƒ½æ˜¯Fisher-Yates</p>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3B5dGhvbi9jcHl0aG9uL2Jsb2IvY2IwNzQ4ZDM5MzljMzExNjhhYjVkM2I4MGUzNjc3NDk0NDk3ZDVlMy9MaWIvcmFuZG9tLnB5I0wyODY=\">Python<i class=\"fa fa-external-link-alt\"></i></span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9saWJjeHgvYmxvYi8yN2M4MzZmZjNhOWM1MDVkZWI5ZmQxNjE2MDEyOTI0ZGU4ZmY5Mjc5L2luY2x1ZGUvYWxnb3JpdGhtI0wyNzg3\">LLVM C++<i class=\"fa fa-external-link-alt\"></i></span></li>\n</ul>\n<h2 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h2><ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRmlzaGVyJUUyJTgwJTkzWWF0ZXNfc2h1ZmZsZQ==\">Wiki<i class=\"fa fa-external-link-alt\"></i></span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9wZW9wbGUuY3MudW1hc3MuZWR1L35waGFhcy9DUzU5ME0vaGFuZG91dHMvRmlzaGVyLVlhdGVzLXByb29mLnBkZg==\">https://people.cs.umass.edu/~phaas/CS590M/handouts/Fisher-Yates-proof.pdf<i class=\"fa fa-external-link-alt\"></i></span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9jcy5zdGFja2V4Y2hhbmdlLmNvbS9xdWVzdGlvbnMvMjE1Mi9ob3ctdG8tcHJvdmUtY29ycmVjdG5lc3Mtb2YtYS1zaHVmZmxlLWFsZ29yaXRobQ==\">https://cs.stackexchange.com/questions/2152/how-to-prove-correctness-of-a-shuffle-algorithm<i class=\"fa fa-external-link-alt\"></i></span></li>\n</ul>\n",
            "tags": [
                "æ¼”ç®—æ³•",
                "éš¨æ©Ÿæ’åº",
                "æ´—ç‰Œ",
                "Fisher-Yates",
                "è­‰æ˜"
            ]
        }
    ]
}